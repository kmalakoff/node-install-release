#!/usr/bin/env node

var program = require('commander');
var assign = require('object.assign');
var nir = require('..');

program.option('-a, --platform [platform]', 'Platform like darwin');
program.option('-a, --arch [arch]', 'Architecure x64, x86, arm-pi');
program.option('-f, --filename [filename]', 'Distribution filename from https://nodejs.org/dist/index.json');
program.option('-c, --cacheDirectory [cacheDirectory]', 'Cache directory');
program.parse(process.argv);

var args = Array.prototype.slice.call(program.args, 0);
if (args.length < 1) {
  console.log('Missing command. Example usage: nir version [directory]');
  return process.exit(-1);
}

var installPath = args.length > 1 ? args[1] : null;
nir(args[0], installPath, assign({ stdio: 'inherit' }, program), function (err, installPath) {
  if (err) {
    console.log(err.message);
    return process.exit(err.code || -1);
  }
  console.log('Installed Node.js in ' + installPath);
  process.exit(0);
});
